(()=>{"use strict";var e={715:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(601),r=n.n(a),o=n(314),i=n.n(o)()(r());i.push([e.id,'body{margin:10px}.game{width:calc(50px*var(--fieldNumber) + 1px*var(--fieldNumber) - 1px);display:grid;grid-template-columns:repeat(var(--fieldNumber), 1fr);border:1px solid #000;grid-gap:1px;background-color:#000}.game .cell{background-color:#fff;width:50px;height:50px}.game .cell[data-class=food]:before{background-color:#c33;border-radius:50%;display:flex;content:"";width:50px;height:50px}.game .cell[data-class=snake]:before{background-color:#0c0;border-radius:50%;display:flex;content:"";width:50px;height:50px}.game .cell[data-class=snakeHead]:before{background-color:#090;border-radius:50%;display:flex;content:"";width:50px;height:50px;justify-content:center;align-items:center;content:"head"}',""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);a&&i[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},2:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(72),r=n.n(a),o=n(825),i=n.n(o),s=n(659),l=n.n(s),d=n(56),c=n.n(d),u=n(540),f=n.n(u),g=n(113),m=n.n(g),p=n(715),v={};v.styleTagTransform=m(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=f(),r()(p.A,v);const k=p.A&&p.A.locals?p.A.locals:void 0},72:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],d=a.base?l[0]+a.base:l[0],c=o[d]||0,u="".concat(d," ").concat(c);o[d]=c+1;var f=n(u),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(g);else{var m=r(g,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var l=a(e,r),d=0;d<o.length;d++){var c=n(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},659:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},316:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.regenerateSnake=t.generateSnake=t.createGameField=t.regenerateGameField=t.syncSnakeWithGameField=t.clearGameFieldBlock=t.render=t.markBlock=void 0;const r=n(266),o=n(491),i=a(n(975));t.markBlock=(e,t)=>{const{gameField:n}=i.default;try{n[e[0]][e[1]]=t,i.default.gameField=n}catch(n){console.error(n,e,t)}},t.render=()=>{i.default.isDebugEnabled&&(()=>{let e="";const{gameField:t}=i.default;for(let n=0;n<t.length;n+=1)e+=`${t[n].join(" ")}\n`;const n=[`gameField: \n${e}`,`current snake's length: ${i.default.snake.length}`,`current snake's speed: ${i.default.snakeInitialMovingSpeed}`];console.info(n.join("\n"))})();const e=document.querySelector(".game"),t={x:0,y:-1};for(let n=0;n<e.children.length;n+=1){t.y+=1,t.y===o.fieldSize&&(t.x+=1,t.y=0);const a=e.children[n],r="data-class";switch(i.default.gameField[t.x][t.y]){case 1:a.setAttribute(r,"food");break;case 2:a.setAttribute(r,"snake");break;case 3:a.setAttribute(r,"snakeHead");break;default:a.removeAttribute(r)}}},t.clearGameFieldBlock=e=>{(0,t.markBlock)(e,0)},t.syncSnakeWithGameField=()=>{const{snake:e}=i.default;for(let n=0;n<e.length;n+=1)(0,t.markBlock)([e[n][0],e[n][1]],0===n?3:2)},t.regenerateGameField=()=>{const e=[];for(let t=0;t<o.fieldSize;t+=1){const t=[];for(let e=0;e<o.fieldSize;e+=1)t.push(0);e.push(t)}i.default.gameField=e},t.createGameField=()=>{const e=document.querySelector("#root");if(!e)return;const n=document.createElement("div");n.className="game",(0,t.regenerateGameField)();let a="";for(let e=0;e<o.fieldSize;e+=1)for(let e=0;e<o.fieldSize;e+=1)a+='<div class="cell"></div>';n.innerHTML=a,e.appendChild(n),document.documentElement.style.setProperty("--fieldNumber",o.fieldSize.toString())},t.generateSnake=()=>{const e=Math.floor((o.fieldSize-1)/2);for(let t=-1;t<o.snakeStartLength-1;t+=1)i.default.snake.push([e+(0,r.getAddition)("x",t,o.snakeStartPosition),e+(0,r.getAddition)("y",t,o.snakeStartPosition)]);(0,t.syncSnakeWithGameField)(),(0,t.render)()},t.regenerateSnake=()=>{i.default.snake=[],(0,t.generateSnake)()}},620:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.winOfGame=t.endOfGame=t.restartGame=t.startNewGame=void 0;const r=n(491),o=n(708),i=a(n(975)),s=n(316),l=n(130);t.startNewGame=e=>{i.default.isDebugEnabled=e?.debug||!1,(0,s.createGameField)(),(0,s.generateSnake)(),(0,o.createNewBlockInRandomPlace)(),(0,l.subscribeOnArrows)()},t.restartGame=()=>{i.default.snakeInitialMovingSpeed=r.snakeInitialMovingSpeed,(0,l.unsubscribeOnArrows)(),(0,l.subscribeOnArrows)(),(0,s.regenerateGameField)(),(0,s.regenerateSnake)(),(0,o.createNewBlockInRandomPlace)(),(0,s.render)()},t.endOfGame=()=>{(0,l.unsubscribeOnArrows)(),(0,l.unsubscribeMoveSnake)(),confirm("Lose. Restart?")&&(0,t.restartGame)()},t.winOfGame=()=>{(0,l.unsubscribeOnArrows)(),(0,l.unsubscribeMoveSnake)(),confirm("Win. Restart?")&&(0,t.restartGame)()}},708:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.moveSnake=t.isEmptyBlock=t.ifAteFood=t.isMovingToBorderLine=t.isMovingToItself=t.isMovingBack=t.createNewBlockInRandomPlace=void 0;const r=n(620),o=n(316),i=n(266),s=a(n(975)),l=n(491);t.createNewBlockInRandomPlace=()=>{const e=[];for(let t=0;t<l.fieldSize;t+=1)for(let n=0;n<l.fieldSize;n+=1)0===s.default.gameField[t][n]&&e.push([t,n]);if(0===e.length)(0,r.winOfGame)();else{const t=(0,i.getRandomNumber)(1,e.length)-1;(0,o.markBlock)(e[t],1),(0,o.render)()}},t.isMovingBack=e=>s.default.snake[1][0]===e[0]&&s.default.snake[1][1]===e[1],t.isMovingToItself=e=>{for(let t=0;t<s.default.snake.length;t+=1)if(s.default.snake[t][0]===e[0]&&s.default.snake[t][1]===e[1])return!1;return!0},t.isMovingToBorderLine=e=>{const{snakeMovingDirection:t}=s.default;return!("horizontalTop"===t&&0===e[0]||"horizontalBottom"===t&&e[0]===l.fieldSize-1||"verticalRight"===t&&e[1]===l.fieldSize-1||"verticalLeft"===t&&0===e[1])},t.ifAteFood=e=>1===s.default.gameField[e[0]][e[1]]&&((()=>{const{snake:e}=s.default,t=e.at(-1),n=(()=>{const[e,t]=s.default.snake.at(-2),[n,a]=s.default.snake.at(-1),[r,o]=[e-n,t-a];return 1===r&&0===o?"horizontalBottom":-1===r&&0===o?"horizontalTop":0===r&&1===o?"verticalRight":0===r&&-1===o?"verticalLeft":"unknown"})(),a=[t[0]+(0,i.getAddition)("x",1,n),t[1]+(0,i.getAddition)("y",1,n)];e.push(a)})(),(0,o.markBlock)(e,0),s.default.snakeInitialMovingSpeed+=l.snakeMovingSpeedIncreaseByEatenFood,!0),t.isEmptyBlock=()=>{const{gameField:e}=s.default;for(let t=0;t<e.length;t+=1)for(let n=0;n<l.fieldSize;n+=1)if(0===e[t][n])return!0;return!1},t.moveSnake=()=>{const e=s.default.snake[0],n=[e[0]-(0,i.getAddition)("x",1),e[1]-(0,i.getAddition)("y",1)];if((0,t.isMovingBack)(n))return void(0,r.endOfGame)();if(!(0,t.isMovingToItself)(n)||!(0,t.isMovingToBorderLine)(e))return void(0,r.endOfGame)();if(!(0,t.isEmptyBlock)())return void(0,r.winOfGame)();const a=(0,t.ifAteFood)(n);s.default.snake.unshift(n),(0,o.clearGameFieldBlock)(s.default.snake.pop()),a&&(0,t.createNewBlockInRandomPlace)(),(0,o.syncSnakeWithGameField)(),(0,o.render)()}},130:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribeOnArrows=t.subscribeOnArrows=t.unsubscribeMoveSnake=t.subscribeMoveSnake=void 0;const r=n(708),o=a(n(975));let i;t.subscribeMoveSnake=()=>{clearTimeout(i),i=window.setTimeout((()=>{window.requestAnimationFrame(r.moveSnake),(0,t.subscribeMoveSnake)()}),1e3/o.default.snakeInitialMovingSpeed)},t.unsubscribeMoveSnake=()=>{clearTimeout(i),i=void 0};const s=({key:e})=>{switch(e){case"ArrowUp":o.default.snakeMovingDirection="horizontalTop";break;case"ArrowDown":o.default.snakeMovingDirection="horizontalBottom";break;case"ArrowLeft":o.default.snakeMovingDirection="verticalLeft";break;case"ArrowRight":o.default.snakeMovingDirection="verticalRight";break;case" ":void 0===i?(0,t.subscribeMoveSnake)():(0,t.unsubscribeMoveSnake)()}};t.subscribeOnArrows=()=>{window.addEventListener("keydown",s)},t.unsubscribeOnArrows=()=>{window.removeEventListener("keydown",s)}},491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.snakeMovingSpeedIncreaseByEatenFood=t.snakeInitialMovingSpeed=t.snakeStartPosition=t.snakeStartLength=t.fieldSize=void 0,t.fieldSize=11,t.snakeStartLength=4,t.snakeStartPosition="horizontalTop",t.snakeInitialMovingSpeed=2,t.snakeMovingSpeedIncreaseByEatenFood=.1},266:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAddition=t.getRandomNumber=void 0;const r=a(n(975));t.getRandomNumber=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,t.getAddition=(e,t,n=r.default.snakeMovingDirection)=>"x"===e&&"horizontalTop"===n?t:"x"===e&&"horizontalBottom"===n?-t:"y"===e&&"verticalLeft"===n?t:"y"===e&&"verticalRight"===n?-t:0},975:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(491),r={get snakeMovingDirection(){return this._snakeMovingDirection},set snakeMovingDirection(e){this._snakeMovingDirection=e},get isDebugEnabled(){return this._isDebugEnabled},set isDebugEnabled(e){this._isDebugEnabled=e},get gameField(){return this._gameField},set gameField(e){this._gameField=e},get snake(){return this._snake},set snake(e){this._snake=e},get snakeInitialMovingSpeed(){return this._snakeMovingSpeed},set snakeInitialMovingSpeed(e){this._snakeMovingSpeed=+e.toFixed(1)}};r.snakeMovingDirection=a.snakeStartPosition,r.isDebugEnabled=!1,r.gameField=[],r.snake=[],r.snakeInitialMovingSpeed=a.snakeInitialMovingSpeed,t.default=r}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{n(2);const e=n(620);window.addEventListener("load",(()=>{(0,e.startNewGame)({debug:!1})}))})()})();